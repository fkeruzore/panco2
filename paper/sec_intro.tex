\section{Introduction}
\label{sec:intro}

%%% Why clusters are cool
Galaxy clusters are deeply interesting physical objects.
Their abundance in mass and redshift is tightly linked to cosmic evolution, and can therefore be used as a cosmological probe \citep[see \eg][for a review]{allen_cosmological_2011}.
In order to exploit this property, large sky surveys have been used to build catalogs of serendipitously detected clusters at different wavelengths, such as X-rays \citep[\eg][]{liu_erosita_2022}, optical \citep[\eg][]{des_collaboration_dark_2020}, and millimeter-waves \citep[\eg][]{bleem_sptpol_2020}.

%%% Why SZ clusters are the coolest
Among these, one of the wavelengths of choice for the detection of galaxy clusters is the millimeter domain.
Clusters can be observed at such frequencies through the Sunyaev-Zeldovich effect \citep[SZ,][]{sunyaev_observations_1972}, \ie\ the spectral distortion of the cosmic microwave background (CMB) due to the Compton scattering of its photons on the free electrons of gas along the line of sight.
The SZ effect is often separated in different components, depending on the origin of the energy transferred from the electrons; the main components being, by order of decreasing importance, the thermal (tSZ) and kinetic \citep[kSZ,][]{sunyaev_velocity_1980} effects \citep[see][for a recent review of the SZ effects]{mroczkowski_astrophysics_2019}.
Catalogs of clusters detected through their tSZ signal are particularly interesting for cosmological applications, as the amplitude of the tSZ effect does not suffer from cosmological dimming \citep{carlstrom_cosmology_2002}.
As a result, modern millimeter-wave sky surveys have brought us some of the largest and deepest cluster samples to date, with the catalogs built from the Atacama Cosmology Telescope \citep[ACT,][]{hilton_atacama_2021}, the South Pole Telescope \citep[SPT,][]{bleem_sptpol_2020}, and \textit{Planck} \citep{planck_collaboration_planck_2016-2} surveys.

%%% Why do we measure pressure profiles
% tSZ depends on ICM pressure, therefore knowing pressure we know what to look for
The amplitude of the tSZ distortion is directly proportional to the electron pressure in the gaseous intracluster medium (ICM) integrated along the line of sight.
This link between tSZ signal and ICM pressure motivates studies of the pressure distribution in the ICM -- in its simplest form, as a spherically symmetric pressure profile.
For example, matched-filtering cluster detection algorithms may require a prior assumption on the overall shape of the ICM pressure profile \citep[\eg][]{melin_comparison_2012}, in which case a poor knowledge of this property of clusters may lead to a poorly constructed cluster sample.
Similarly, the power spectrum of the tSZ effect on the sky, which can be used to constrain cosmology, strongly relies on an assumption of the pressure profile of clusters, and the recovering of cosmological parameters can be severely affected by its poor knowledge \citep{ruppin_impact_2019}.
% Early studies told us they should all be the same
The mean pressure profile of galaxy clusters has been investigated using different cluster samples over the last decade.
Early works conducted on local, X-ray selected samples, such as \citet[][hereafter \aten]{arnaud_universal_2010}, converged towards a ``universal'' pressure profile, undergoing self-similar redshift and mass evolution \citep[see also \eg][]{battaglia_cluster_2012-1, planck_collaboration_planck_2013}
In these studies, the main determining factor for the shape of the pressure profile of a cluster was its dynamical state, with relaxed clusters exhibiting a steeper pressure profile in their core.
% But hey that was wrong because feedback and stuff
% We'd do simulations but their subgrids need us so the snake is eating its own tail

\textcolor{lightgray}{\lipsum[1]}

%%% How do we measure pressure profiles
% Can be from Xrays
% But that works better for low-z and high-M thingies
% Can be from SZ
% Need to resolve them but can be done

%%% What is this paper
% In this work we present a software to go from SZ map to P(r)
An earlier version of \panco\ was described in \citet{keruzore_panco2_2021}, which offered less flexibility in the analysis, as the only data that could be analyzed was maps from the NIKA2 camera 150~GHz channel\citep{adam_nika2_2018, perotto_calibration_2020}.
This software has already been used for different studies based on NIKA2 data \citep[\eg][]{artis_psz2_2022,munoz-echeverria_multi-probe_2022,munoz-echeverria_lpsz-clash_2022}.
Here, we present a generalization of the code, that makes it able to perform pressure profile extractions from arbitrary data formats.



\textcolor{lightgray}{\lipsum[2]}

Throughout this paper, even though \panco\ can use different cosmologies \todo{this is not true yet}, we assume a flat $\Lambda {\rm CDM}$ model, with $\Omega_{\rm m} = 0.3, \;\Omega_\Lambda = 0.7, \; h = 0.7$.
This cosmology is mainly used to infer angular diameter distances to the cluster being studied from its redshift, in order to accuratrly map sky distances to physical ones.
Quantities with a $500$ subscript refer to the properties of a cluster within its characteristic radius $R_{500}$, corresponding to the radius of a sphere around the center of the cluster in which the mean matter density is $500$ times the critical density of the Universe at the cluster's redshift.
