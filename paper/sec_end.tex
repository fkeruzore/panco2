% !TEX root = ./main.tex
% ========================================================================== %
\section{Conclusions and discussion} \label{sec:end}

This paper presents the release of \panco, a software enabling its users to perform pressure profile extraction from a tSZ map.
We have presented the main features of the software, based on forward modeling MCMC of the tSZ signal with a radially-binned pressure profile.
We have presented the variety of observational systematics that can be incorporated in the modeling in order to account for the known features of millimeter-wave observations.
In section \S\ref{sec:simu}, we have shown that \panco\ could retrieve unbiased pressure profile estimates from \textit{Planck}-like, SPT-like, and NIKA2-like data, effectively covering a range of angular resolutions from $18''$ to $10'$.
The software is made public, along with a detailed documentation providing deeper technical insights on the code and its usage.

% -------------------------------------------------------------------------- %
\subsection{Products released}

The entirety of the \panco\ software is made available as a github repository\footnote{\url{https://github.com/fkeruzore/panco2}}.
That same repository also includes the data generated for the validation described in \S\ref{sec:simu}, along with the products of said validation (\ie\ the Markov chains and the running sequences used for each dataset).
Alternatively, \panco\ can be installed through \texttt{pip} as follows \todo{not true yet}:
\begin{verbatim}
    $ pip install panco2
\end{verbatim}

In addition, \panco\ is also accompanied by an online technical documentation \todo{url}.
It includes detailed explanations of the technical aspects of the code, as well as a description of the inputs and outputs of \panco's different functions.
The documentation also gives examples of analyses that can be performed with \panco\ beyond the ones presented in the validation.

% -------------------------------------------------------------------------- %
\subsection{Possible future improvements}

This release of \panco\ allows a user to perform the fit of a radially binned pressure profile model on a tSZ map.
Several additional features can be thought of to offer more flexibility in this kind of analysis.
Here, we offer a non-exhaustive list of possible such extensions.
We strongly emphasize that this list should \textit{not} be interpreted as a list of features currently in development by the authors, but instead as a collection of possible avenues to explore.

\paragraph{Joint analysis of several tSZ maps} % ........................... %
We have shown in \S\ref{sec:simu} that \panco\ could recover pressure profiles from tSZ observations with different kinds of instruments -- namely, we have tested \textit{Planck}-, SPT-, and NIKA2-like mappings.
But our analysis treated all of these datasets separately.
For clusters with available data from several instruments, there may be interesting information to be extracted from the joint analysis of several maps \citep[see \eg][]{ruppin_first_2018, romero_multi-instrument_2018}.

\paragraph{Different profile parametrizations} % ........................... %
As discussed in \S\ref{sec:algo:press}, many studies of pressure profiles from tSZ (or X-rays) observations use the gNFW profile.
Even though our radially-binned parametrization offers more flexibility and circumvents the known problems of the usual gNFW parametrization, one may be interested in using other functional forms of pressure profile.
For example, the rewriting of the gNFW model from \citet{battaglia_cluster_2012-1} \citep[see also \eg][]{sayers_evolution_2022} offers a way to constrain the same functional form, but minimizing the correlations in the parameter space.
Even though it is still possible to use a radially-binned profile and to fit any other functional form on the pressure bins \textit{a posteriori} \citep[see \eg][]{munoz-echeverria_multi-probe_2022}, one may want to directly fit said parametrization to the data, which is currently not supported.

\paragraph{Non-spherical pressure models} % ................................ %
Galaxy clusters are well known to not be perfectly spherical structures.
Consequently, fitting a spherically-symmetric pressure distribution misses some information potentially contained in tSZ maps.
For examples, clusters can be aspherical because they are an ongoing merger of two substructures.
Observations of such systems can give precious insights on the dynamics of cluster mergers, and therefore on the physics of large-scale structure formation.
Additionally, non-merging clusters may be aspherical because of their connection to the cosmic web, which can provide interesting insights on cosmic filaments.
Therefore, the possibility to fit pressure distributions beyond spherical symmetry is interesting.
Depending on the morphology of the system, this may be done by fitting for an ellipsoidal pressure distribution \citep[\eg][]{sarazin_deep_2016}, or the sum of the contributions of two (possibly spherical) halos \citep[\eg][]{artis_psz2_2022}.
These possibilities are not implemented in \panco, but might be an interesting extension.

\paragraph{Joint tSZ--X-ray analysis} % .................................... %
The \textit{bremsstrahlung} of hot electrons makes the ICM emit in the X-ray domain \citep[see \eg][for reviews]{bohringer_x-ray_2010, bohringer_x-ray_2013}.
This radiation carries information on the ICM that is very complementary to that offered by tSZ observations.
Namely, similarly to how tSZ signal is linked to the electron pressure in the ICM -- as seen in eq.~(\ref{eq:algo_ysz}) -- X-ray emission is linked to its (squared) electron density.
Moreover, for sufficiently deep observations, X-ray data can also be used to study the spectral distribution of the detected photons, enabling measurements of the ICM electron temperature.
The combination of X-ray and tSZ observations of clusters therefore offers a way to finely characterize ICM thermodynamics.
This complementarity can be exploited \textit{a posteriori}, \eg\ by combining results from \panco\ with density and temperature profiles obtained independently of X-ray data \citep[\eg][]{keruzore_exploiting_2020}, or through a joint fit of the thermodynamic properties \citep[\eg][]{castagna_joxsz_2020-1}.
The possibility of joint tSZ--X-ray fits could be added to \panco\ to take further advantage of this complementarity.

% -------------------------------------------------------------------------- %
\subsection{Recommendations to users}

\todo{this is a terrible section title, please help}

As discussed in \S\ref{sec:algo:press}, the pressure model fitted on the data requires the user to define a set of radii used as nodes for the power-law interpolation of the profile.
The choice of these radii is far from straightforward, as it depends on the angular scales present in the data to be fitted, as well as on the scientific goals of the analysis.
This is the main downside of the radially binned model used in \panco, as the radii chosen may have a significant impact on the analysis results.
The model dependence of products derived from radially-binned pressure profiles has been discussed by \citet{munoz-echeverria_multi-probe_2022}, who show that hydrostatic mass estimates, linked to the first derivative of the pressure profile, are particularly affected.

In order to try to circumvent this shortcoming, we strongly advise \panco\ users to be cautious about their choice of binning, and, when possible, to try different binnings.
We have implemented functions in \panco\ that allow users to easily simulate a mock tSZ map mimicking the data to be fitted.
We encourage users to use this functionality to create such datasets and try out their choices of radial binning on these.
Similarly to the validation presented in \S\ref{sec:simu:results}, the comparison of the pressure profile reconstructed with the one used to generate the map will provide insights on how well adapted a choice of radial binning is to a dataset.
How to perform such an analysis is presented in the technical documentation, at \todo{url}.
